## Build NPDatabase
_all scripts in Build_NPDatabase directory_  

Note: These scripts were used in order to create NPDatabase. If you want to rebuild NPDatabase, the structure_idâ€™s will change.

__Step 1:__  
Input: structure data in CLASS format (see CLASS_format_example.txt for the exact file content)
Script: collect_all_structures.py  
Output: text file with SMILES and external source identifier

First, all structure data from the different external databases is stored in a file containing the external_source_id and the SMILES. This step has to be repeated for each input file, then all structure data will be collected into one concatenated file.

__Step 2:__   
Input: concatenated file with all structure data (text file with SMILES and external source identifier)
Script: create_NPDatabase.py  
Output: SQLite file with structure table (with all RDkit attributes), structure_has_data_source table (completed) and data_source table (completed)
This script selects unique structures based on the isomeric/ canonical SMILES, generated by RDkit. Each structure has assigned a unique structure_id which will be used as primary key in the structure table present in NPDatabase. Also the attributes structure_id, isomeric_smiles, canonical_smiles, monoisotopic_mass, molecular_formula, inchi, inchi_key_rdkit are generated and stored in the structure table. For the structure_has_data_source table, a structure_source_id is created for each structure_id and external_source_id pair (the same structure can be found in multiple databases). The data_source table contains the name of the external database the structures came from and the number of structures.

__Step 3:__  
Input: NPDatabase file  
Input: All molconvert inchi keys  
Script: add_molconvonvert_inchi_key.py 
Output: SQLite file with molconvert inchi keys added to the structure table  

After you have generated the mol convert inchi keys, see  https://github.com/NP-Plug-and-Play-Scripts/inchiKeyCreatorPipeline and step 3 in add new structure data, they can be added to the structure table. 

Now NPDatabase can be classified with the ClassyFire Pipeline, see https://github.com/OscarHoekstra/ClassifyNPDB and step 6 in add new structure data.
